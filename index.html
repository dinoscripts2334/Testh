<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lockerer Teleprompter, Cheffe!</title>
    <style>
        /* üé® Das Styling f√ºr den Teleprompter */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #222; /* Dunkler Hintergrund */
            color: #fff; /* Heller Text */
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden; /* Verhindert das Scrollen der Seite selbst */
        }
        
        #controls {
            padding: 15px;
            background-color: #333;
            border-bottom: 2px solid #555;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        #controls label, #controls button, #controls input, #controls select {
            color: #fff;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 16px;
        }
        
        #controls button {
            background-color: #007bff;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        #controls button:hover {
            background-color: #0056b3;
        }

        #prompter-area {
            flex-grow: 1;
            overflow: hidden; /* Wichtig f√ºr das automatische Scrollen */
            position: relative;
        }

        #text-container {
            position: absolute; /* Positioniert den Text relativ zur Prompter-Area */
            width: 100%;
            /* Startposition des Textes: Am unteren Rand, so dass er nach oben scrollt */
            top: 100%; 
            transition: transform linear; /* Linearer √úbergang f√ºr fl√ºssiges Scrollen */
            padding: 50vh 5% 50vh 5%; /* Vertikaler Abstand, um den Text mittig durchlaufen zu lassen */
            box-sizing: border-box;
            text-align: center; /* Text zentrieren */
        }

        #prompter-text {
            font-size: 72px; /* Standard-Schriftgr√∂√üe */
            line-height: 1.4;
            color: #00ffaa; /* Auff√§llige Farbe f√ºr den Text */
        }

        #input-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        #input-panel textarea {
            width: 80%;
            height: 60%;
            padding: 20px;
            font-size: 20px;
            border: 2px solid #007bff;
            background-color: #444;
            color: #fff;
            resize: none;
            margin-bottom: 20px;
        }
        
        #input-panel button {
            padding: 10px 20px;
            font-size: 18px;
            background-color: #28a745;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <div id="input-panel">
        <h2>Dein Text, Cheffe!</h2>
        <textarea id="teleprompter-input" placeholder="Gib hier deinen Text ein."></textarea>
        <button onclick="setText()">Teleprompter starten</button>
    </div>

    <div id="controls">
        <button id="startButton">‚ñ∂Ô∏è Start / ‚è∏Ô∏è Pause</button>
        <button id="resetButton">üîÑ Reset</button>
        
        <label for="speed">Geschw. (ms/Pixel):</label>
        <input type="range" id="speed" min="1" max="50" value="10">
        
        <label for="fontSize">Gr√∂√üe (px):</label>
        <input type="range" id="fontSize" min="30" max="150" value="72">
        
        <button onclick="showInputPanel()">‚úçÔ∏è Text √§ndern</button>
        
        <select id="mirrorMode">
            <option value="none">Normal</option>
            <option value="horizontal">Horizontal spiegeln</option>
        </select>
        
        <button onclick="toggleFullScreen()">‚õ∂ Fullscreen</button>
    </div>

    <div id="prompter-area">
        <div id="text-container">
            <p id="prompter-text">Gib deinen Text im Eingabefeld ein, Cheffe!</p>
        </div>
    </div>

    <script>
        // üß† Das JavaScript f√ºr die Logik
        
        const textContainer = document.getElementById('text-container');
        const prompterText = document.getElementById('prompter-text');
        const speedInput = document.getElementById('speed');
        const fontSizeInput = document.getElementById('fontSize');
        const startButton = document.getElementById('startButton');
        const mirrorMode = document.getElementById('mirrorMode');
        const inputPanel = document.getElementById('input-panel');
        const teleprompterInput = document.getElementById('teleprompter-input');
        
        let animationFrameId = null;
        let isRunning = false;
        let startTime = null;
        let textHeight = 0;
        
        // --- Setup und Steuerung ---
        
        // Text aus dem Input-Feld in den Prompter √ºbertragen und das Eingabefenster verstecken
        function setText() {
            const text = teleprompterInput.value.trim().replace(/\n/g, '<br><br>');
            if (text) {
                prompterText.innerHTML = text;
                inputPanel.style.display = 'none';
                resetPrompter();
            } else {
                alert('Cheffe, gib doch bitte Text ein!');
            }
        }
        
        function showInputPanel() {
            inputPanel.style.display = 'flex';
        }

        // Setzt den Prompter auf die Startposition zur√ºck und stoppt das Scrollen
        function resetPrompter() {
            if (animationFrameId) {
                cancelAnimationFrame(animationFrameId);
                animationFrameId = null;
                isRunning = false;
                startButton.textContent = '‚ñ∂Ô∏è Start / ‚è∏Ô∏è Pause';
            }
            // Setzt die Scroll-Position auf den Start (100% unten)
            textContainer.style.transform = 'translateY(0)';
            textContainer.style.transitionDuration = '0s'; // Reset Transition
        }
        
        function toggleRunning() {
            if (isRunning) {
                pausePrompter();
            } else {
                startPrompter();
            }
        }

        function startPrompter() {
            if (isRunning) return;
            
            // Textgr√∂√üe und H√∂he neu berechnen
            textHeight = textContainer.offsetHeight;
            
            // Geschwindigkeit aus dem Input holen (h√∂herer Wert = langsamer, da ms/px)
            const speedValue = parseInt(speedInput.value); 
            // Berechne die ben√∂tigte Zeit f√ºr die gesamte Strecke in Sekunden
            // Strecke: textHeight (Pixel) / Geschwindigkeit (Pixel pro Sekunde)
            const durationSeconds = textHeight * speedValue / 1000;
            
            // Setze die Transition-Dauer
            textContainer.style.transitionDuration = `${durationSeconds}s`;
            
            // Setze die Ziel-Position (nach oben, um die H√∂he des Textes zu verdecken)
            // Die Transformation ist relativ zur urspr√ºnglichen Position (top: 100%)
            // Der Text muss um seine eigene H√∂he nach oben bewegt werden (-textHeight)
            const targetY = -textHeight - (window.innerHeight * 0.5); // Etwas weiter schieben, damit der letzte Satz auch mittig durchl√§uft

            textContainer.style.transform = `translateY(${targetY}px)`;
            
            isRunning = true;
            startButton.textContent = '‚è∏Ô∏è Pause';
        }

        function pausePrompter() {
            if (!isRunning) return;
            
            // Aktuelle Position speichern
            const currentTransform = window.getComputedStyle(textContainer).transform;
            textContainer.style.transform = currentTransform;
            
            // Scrollen stoppen, indem die Transition-Dauer auf 0 gesetzt wird
            textContainer.style.transitionDuration = '0s';
            
            isRunning = false;
            startButton.textContent = '‚ñ∂Ô∏è Start / ‚è∏Ô∏è Pause';
        }

        // --- Event Listener ---
        
        startButton.addEventListener('click', toggleRunning);
        document.getElementById('resetButton').addEventListener('click', resetPrompter);
        
        // Schriftgr√∂√üe anpassen
        fontSizeInput.addEventListener('input', () => {
            prompterText.style.fontSize = fontSizeInput.value + 'px';
            // Muss neu berechnet werden, wenn der Text w√§hrend des Scrolls l√§uft
            if (isRunning) {
                pausePrompter(); // Erst pausieren, dann starten (was die Werte neu berechnet)
            }
        });
        
        // Spiegeleffekte
        mirrorMode.addEventListener('change', (e) => {
            if (e.target.value === 'horizontal') {
                prompterText.style.transform = 'scaleX(-1)';
            } else {
                prompterText.style.transform = 'scaleX(1)';
            }
        });
        
        // Fullscreen-Funktion
        function toggleFullScreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                }
            }
        }
        
        // Event, das ausgel√∂st wird, wenn die CSS-Transition fertig ist (Text ist durchgelaufen)
        textContainer.addEventListener('transitionend', () => {
            if (isRunning) {
                // Wenn der Scroll durch ist, stoppen und zur√ºcksetzen
                resetPrompter();
            }
        });

        // Setzt die initialen Werte
        prompterText.style.fontSize = fontSizeInput.value + 'px';
        
        // Beim Laden direkt das Eingabefeld zeigen
        window.onload = showInputPanel;
        
    </script>
</body>
</html>
